<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>개인정보 유형별 현황</title>
  
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script>

<link rel="stylesheet" href="assets/css/common.css">
<link rel="stylesheet" href="assets/page-css/personal_information_type.page.css">
<script src="assets/js/common.js"></script>
<script src="assets/page-js/personal_information_type.page.js"></script>
</head>
<body>
  <div class="brandbar"><div class="dot"></div> Privacy Monitor</div>
  <div class="pm-container">
    <div class="page-title"><span onclick="location.href='main.html'">개인정보 탐지 대시보드</span></div>
    <div class="pm-navwrap">
      <nav class="pm-nav" aria-label="주요 메뉴">
        <a href="#" onclick="location.href='detection_details.html'">탐지 현황</a>
        <a href="#" onclick="location.href='detection_type.html'">탐지 유형</a>
        <a href="#" onclick="location.href='personal_information_type.html'">개인정보 유형</a>
      </nav>
    </div>



    <div class="max-w-6xl mx-auto p-4">
    <div class="flex gap-16 mb-16 align-stretch">
      <!-- 필터 카드 -->
      <section class="card flex-1 height-fit" aria-label="필터">
        <div class="quick" aria-label="빠른 기간 선택">
          <button class="pill" data-range="today">오늘</button>
          <button class="pill" data-range="lastweek">지난 주</button>
          <button class="pill" data-range="lastmonth">지난 달</button>
          <span class="muted quick-desc" id="quickDesc"></span>
        </div>

        <div class="filters" style="display:block !important;">
          <!-- 2줄: 시작/종료 일자 -->
          <div style="display:flex !important;gap:12px;margin-bottom:12px;flex-wrap:wrap;">
            <div class="field" style="flex:1 !important;grid-column:unset !important;min-width:150px;">
              <label for="from">시작 일자</label>
              <input type="date" id="from" />
            </div>
            <div class="field" style="flex:1 !important;grid-column:unset !important;min-width:150px;">
              <label for="to">종료 일자</label>
              <input type="date" id="to" />
            </div>
          </div>
          
          <!-- 3줄: 개인정보 유형/소스 유형 -->
          <div style="display:flex !important;gap:12px;margin-bottom:12px;">
            <div class="field" style="flex:1 !important;grid-column:unset !important;">
              <label for="type">개인정보 유형</label>
              <select id="type">
                <option value="">전체</option>
                <option>이름</option><option>전화번호</option><option>이메일</option><option>생년월일</option>
                <option>주민등록번호</option><option>외국인등록번호</option><option>운전면허번호</option><option>여권번호</option>
                <option>계좌번호</option><option>카드번호</option><option>IP</option><option>직책</option><option>조직/기관</option>
              </select>
            </div>
            <div class="field" style="flex:1 !important;grid-column:unset !important;">
              <label for="source">탐지 유형</label>
              <select id="source">
                <option value="">전체</option>
                <option>텍스트</option><option>PDF</option><option>DOCX/DOC</option><option>XLSX/XLS</option><option>PPTX</option><option>HWPX/HWP</option><option>TXT</option>
              </select>
            </div>
          </div>
          
          <!-- 4줄: 상태/사용자 -->
          <div style="display:flex !important;gap:12px;margin-bottom:12px;">
            <div class="field" style="flex:1 !important;grid-column:unset !important;">
              <label for="status">상태</label>
              <select id="status">
                <option value="">전체</option>
                <option>성공</option><option>실패</option><option>개인 식별 의심</option>
              </select>
            </div>
            <div class="field" style="flex:1 !important;grid-column:unset !important;">
              <label for="emp">사용자(사번)</label>
              <input id="emp" placeholder="예: A1023, S0001" />
            </div>
          </div>
          
          <!-- 5줄: 검색 -->
          <div class="field search" style="margin-bottom:12px;grid-column:unset !important;">
            <label for="q">검색(IP/OS/컴퓨터이름/LLM/파일명)</label>
            <input id="q" placeholder="예: 192.168.1.1, Windows, PC-001, GPT-4, report.pdf..." />
          </div>
        </div>

        <div class="toolbar">
          <div class="muted" id="summary">총 0건</div>
          <div class="actions">
            <button class="btn ghost" id="resetBtn">초기화</button>
            <button class="btn primary" id="applyBtn">적용</button>
          </div>
        </div>
      </section>

      <!-- 차트 -->
      <section class="card chart-card" style="flex:1;display:flex;flex-direction:column;margin-top:0 !important;padding-bottom:20px;" aria-label="유형별 그래프">
        <h2 style="font-size:16px;margin:6px 0 16px 0;text-align:center;">개인정보 유형별 분포 (원형)</h2>
        <div class="chart-wrap" style="flex:1;display:flex;align-items:center;justify-content:center;padding:20px;">
          <div style="position:relative;width:100%;height:100%;max-width:400px;max-height:400px;display:flex;align-items:center;justify-content:center;">
            <canvas id="pieChart" aria-label="유형별 분포 파이차트"></canvas>
          </div>
        </div>
      </section>
    </div>

    <!-- 목록 -->
    <section class="card mt-16" aria-label="목록">
      <div class="table-wrap">
        <table aria-describedby="summary">
          <thead>
            <tr>
              <th class="w-100 center">상태</th>
              <th class="w-120 center">일자</th>
              <th class="w-110 center">사번</th><!-- 추가 열 -->
              <th class="w-220 center">개인정보 유형</th>
              <th class="w-140 center">소스 유형</th>
              <th class="center">파일명</th>
              <th class="center">실패 사유</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
      <div class="empty" id="empty" hidden>조건에 맞는 결과가 없습니다.</div>
    </section>
    </div>
  </div>

  <!-- 세부 내용 팝업 모달 -->
  <div id="detailModal" class="modal">
    <div class="modal-content card" style="position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:white;border-radius:12px;width:min(90vw,900px);max-height:95vh;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,0.15);">
      <div class="modal-header" style="background:#f8fafc;padding:16px 20px;border-bottom:1px solid #e2e8f0;">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <h3 style="margin:0;font-size:18px;font-weight:600;color:#1e293b;">탐지 결과 상세</h3>
          <button id="closeModal" style="background:#f1f5f9;border:1px solid #e2e8f0;border-radius:6px;width:32px;height:32px;display:flex;align-items:center;justify-content:center;cursor:pointer;color:#64748b;font-size:16px;transition:all 0.2s;" onmouseover="this.style.background='#e2e8f0'" onmouseout="this.style.background='#f1f5f9'">&times;</button>
        </div>
      </div>
      <div class="modal-body" style="padding:20px;max-height:calc(95vh - 100px);overflow-y:auto;">
        <div class="detail-sections">
          <!-- 기본 정보 -->
          <div class="detail-section" style="margin-bottom:18px;">
            <h4 style="margin:0 0 10px 0;font-size:14px;font-weight:600;color:#374151;border-bottom:1px solid #e2e8f0;padding-bottom:4px;">기본 정보</h4>
            <div class="detail-grid" style="display:flex;gap:12px;flex-wrap:wrap;">
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:120px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">상태</div>
                <div id="detail-status" style="font-size:13px;font-weight:700;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:120px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">사번</div>
                <div id="detail-emp" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:140px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">일자</div>
                <div id="detail-date" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
            </div>
          </div>
          
          <!-- 시스템 정보 -->
          <div class="detail-section" style="margin-bottom:18px;">
            <h4 style="margin:0 0 10px 0;font-size:14px;font-weight:600;color:#374151;border-bottom:1px solid #e2e8f0;padding-bottom:4px;">시스템 정보</h4>
            <div class="detail-grid" style="display:flex;gap:12px;flex-wrap:wrap;">
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:140px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">IP 주소</div>
                <div id="detail-ip" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:140px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">운영체제</div>
                <div id="detail-os" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">컴퓨터 이름</div>
                <div id="detail-computer" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
            </div>
          </div>
          
          <!-- 웹 정보 -->
          <div class="detail-section" style="margin-bottom:18px;">
            <h4 style="margin:0 0 10px 0;font-size:14px;font-weight:600;color:#374151;border-bottom:1px solid #e2e8f0;padding-bottom:4px;">웹 정보</h4>
            <div class="detail-grid" style="display:flex;gap:12px;flex-wrap:wrap;">
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:100px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">브라우저</div>
                <div id="detail-browser" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:80px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">LLM</div>
                <div id="detail-llm" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;max-width:400px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">URL</div>
                <div id="detail-url" style="font-size:12px;font-weight:700;word-break:break-all;overflow-wrap:break-word;">-</div>
              </div>
            </div>
          </div>
          
          <!-- 탐지 정보 -->
          <div class="detail-section">
            <h4 style="margin:0 0 10px 0;font-size:14px;font-weight:600;color:#374151;border-bottom:1px solid #e2e8f0;padding-bottom:4px;">탐지 정보</h4>
            <div class="detail-grid" style="display:flex;gap:12px;flex-wrap:wrap;">
              <div class="detail-item" style="background:#f8fafc;padding:10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:120px;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">탐지 유형</div>
                <div id="detail-source" style="font-size:13px;font-weight:600;white-space:nowrap;">-</div>
              </div>
              <div class="detail-item" id="filename-section" style="background:#f8fafc;padding:10px 16px 10px 10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">파일명</div>
                <div id="detail-filename" style="font-size:13px;font-weight:600;word-break:break-all;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px 16px 10px 10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">개인정보 유형</div>
                <div id="detail-types" style="font-size:13px;font-weight:600;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px 16px 10px 10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;" id="validation-section">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">검증 결과</div>
                <div id="detail-validation" style="font-size:13px;font-weight:600;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px 16px 10px 10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">개인 식별 의심</div>
                <div id="detail-suspicious" style="font-size:13px;font-weight:600;">-</div>
              </div>
              <div class="detail-item" style="background:#f8fafc;padding:10px 16px 10px 10px;border-radius:6px;border:1px solid #e2e8f0;flex:0 0 auto;min-width:fit-content;" id="reason-section">
                <div style="font-size:11px;color:#64748b;font-weight:500;margin-bottom:3px;">실패 사유</div>
                <div id="detail-reason" style="font-size:13px;font-weight:600;">-</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

<!-- (선택) 우측 상단 유저 박스 -->
<div class="pm-userbox" role="group" aria-label="사용자 메뉴">
  <span class="emp" title="사번"><span class="dot" aria-hidden="true"></span> <span id="userEmp">S0001</span></span>
  <button type="button" class="logout" id="accountBtn" onclick="location.href='account_management.html'" style="background:#F9F7F7;">계정 관리</button>
  <button type="button" class="logout" onclick="location.href='login.html'">로그아웃</button>
</div>
</body>
</html>